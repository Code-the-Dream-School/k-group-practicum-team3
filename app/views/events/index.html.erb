<h1>Events</h1>
<table border="1" cellpadding="6" cellspacing="0">
	<thead>
		<tr>
			<th>Title</th>
			<th>Category</th>
			<th>Location</th>
			<th>Event time</th>
			<th>Age Range</th>
			<th>Description</th>
			<th>Show</th>
			<th>Edit</th>
			<th>Delete</th>
		</tr>
	</thead>
<tbody>
    <% @events.each do |event| %>
      <tr>
        <!-- Category -->
        <td><%= event.category.titleize %></td>

        <!-- Location -->
        <td><%= event.city.presence || "Online / N/A" %></td>

        <!-- Start Time -->
        <td>
          <%= event.starts_at.strftime("%Y-%m-%d %I:%M %p") if event.starts_at %>
        </td>

        <!-- Age Range -->
        <td>
          <% if event.age_min.present? || event.age_max.present? %>
            <%= event.age_min || "?" %> â€“ <%= event.age_max || "?" %>
          <% else %>
            Any
          <% end %>
        </td>

        <!-- Organizer -->
        <td><%= event.organizer&.name || event.organizer&.email %></td>

        <!-- Description -->
        <td><%= truncate(event.description, length: 40) %></td>

        <!-- Show -->
        <td>
          <%= link_to "Show", event_path(event) %>
        </td>

        <!-- Edit -->
        <td>
          <% if current_user&.admin? || current_user&.id == event.organizer_id %>
            <%= link_to "Edit", edit_event_path(event) %>
          <% else %>
            <span style="color: gray;">Not allowed</span>
          <% end %>
        </td>

        <!-- Delete -->
        <td>
          <% if current_user&.admin? || current_user&.id == event.organizer_id %>
            <%= button_to "Delete", event_path(event),
                  method: :delete,
                  data: { turbo_confirm: "Are you sure you want to delete this event?" } %>
          <% else %>
            <span style="color: gray;">Not allowed</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<div style="margin-bottom: 16px;">
  <%= link_to "Create New Event", new_event_path %>
</div>	